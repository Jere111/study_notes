[TOC]

## 第一章zookeeper入门

### 1.1 概述

是一个开源的分布式协调服务。

从设计模式角度来理解，是一个基于观察者模式设计的分布式服务管理框架，它负责存储和管理大家都关心的数据，然后接受观察者的注册，一旦这些数据的状态发送变化，zookeeper就讲负责通知已经在Zookeeper上注册的那些观察者做出相应的反应。

Zookeeper=文件系统+通知机制

### 1.2 特点

- 一个领导者（Leader），多个跟随者（Follower）组成的集群。
- 集群中只要有半数以上节点存活，Zookeeper集群就能正常服务。
- 全局数据一致性：每个server保存一份相同的数据副本，Client无论连接到哪个server，数据都是一致的。
- 更新请求顺序进行，来自同一个Client的更新请求按其发送顺序依次执行。
- 数据更新原子性，依次数据更新要么成功，要么失败。
- 实时性，在一定时间范围内，Client能读到最新数据。

### 1.3 数据结构

Zookeeper数据模型的结构与Unix文件系统很类似，整体上可以看作是一棵树，每个节点称作一个ZNode。每个ZNode默认能够存储1MB的数据，每个ZNode都可以通过其路径唯一标识。

### 1.4 应用场景

- 统一命名服务

  在分布式环境中，经常需要对应用/服务进行统一命名，便于识别。

  例如：IP不容易记住，而域名容易记住。

- 统一配置管理

  1）在分布式环境下，配置文件同步非常常见：

  ​	（1）一般要求一个集群中，所有节点的配置信息是一致的，比如Kafka集群。

  ​	（2）对配置文件修改后，希望能够快速同步到各个节点上。

  2）配置管理可交由Zookeeper实现。

  ​	（1）可将配置信息写入Zookeeper上的一个ZNode。

  ​	（2）各个客户端服务器监听这个ZNode。

  ​	（3）一旦ZNode中的数据被修改，Zookeeper将通知各个客户端服务器。

- 统一集群管理

  1）分布式环境中，实时掌握每个节点的状态是必要的。

  ​	（1）可根据节点实时状态做出一些调整。

  2）Zookeeper可以实现实时监控节点状态变化。

  ​	（1）可将节点信息写入Zookeeper上一个ZNode。

  ​	（2）监听这个ZNode可获取它的实时状态变化。

- 软负载均衡

  在Zookeeper中记录每台服务器的访问数，让访问数最少的服务器去处理最新的客户端请求。

### 1.5 下载地址

